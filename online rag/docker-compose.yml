version: '3.8'  # Compose文件版本（兼容大部分Docker版本）

services:
  qdrant:
    image: qdrant/qdrant:latest  # Qdrant镜像及版本
    container_name: qdrant  # 容器名称（和之前一致）
    restart: always  # 容器异常退出时自动重启（确保服务稳定性）
    ports:
      - "6333:6333"  # HTTP API端口（核心，用于Web UI和API调用）
      - "6334:6334"  # gRPC端口（可选，高性能通信场景使用）
    volumes:
      # 本地数据目录映射（解决空格路径问题，使用相对路径自动适配）
      - ./qdrant_data:/qdrant/storage
    environment:
      # 可选环境变量（按需配置，默认无需修改）
      - QDRANT_LOG_LEVEL=INFO  # 日志级别（DEBUG/INFO/WARN/ERROR）
      - QDRANT_HTTP_MAX_REQUEST_SIZE=100MB  # 最大请求大小
    networks:
      - qdrant-network  # 自定义网络（隔离其他服务，更安全）

networks:
  qdrant-network:
    driver: bridge  # 桥接网络（默认网络模式，适合单机部署）
